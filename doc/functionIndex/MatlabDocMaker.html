<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of MatlabDocMaker</title>
  <meta name="keywords" content="MatlabDocMaker">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../functionIndex.html">Home</a> &gt;  <a href="functionIndex.html">.</a> &gt; MatlabDocMaker.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../functionIndex.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="functionIndex.html">Index for .&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>MatlabDocMaker
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="MatlabDocMaker.html" class="code" title="">MatlabDocMaker</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="MatlabDocMaker.html" class="code" title="">MatlabDocMaker</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function name = getProjectName</a></li><li><a href="#_sub2" class="code">function dir = getOutputDirectory</a></li><li><a href="#_sub3" class="code">function dir = getSourceDirectory</a></li><li><a href="#_sub4" class="code">function dir = getConfigDirectory</a></li><li><a href="#_sub5" class="code">function desc = getProjectDescription</a></li><li><a href="#_sub6" class="code">function setProjectDescription(value)</a></li><li><a href="#_sub7" class="code">function version = getProjectVersion</a></li><li><a href="#_sub8" class="code">function setProjectVersion(value)</a></li><li><a href="#_sub9" class="code">function fullPath = getProjectLogo</a></li><li><a href="#_sub10" class="code">function setProjectLogo(value)</a></li><li><a href="#_sub11" class="code">function open</a></li><li><a href="#_sub12" class="code">function create(varargin)</a></li><li><a href="#_sub13" class="code">function setup</a></li><li><a href="#_sub14" class="code">function value = getProjPrefTag</a></li><li><a href="#_sub15" class="code">function value = getPref(name, default)</a></li><li><a href="#_sub16" class="code">function value = setPref(name, value)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="MatlabDocMaker.html" class="code" title="">MatlabDocMaker</a>
0002 <span class="comment">% MatlabDocMaker: Automated documentation creation using doxygen and mtoc++ from within MatLab</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Currently documentation creation for unix and windows environment is</span>
0005 <span class="comment">% supported.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% Prerequisites:</span>
0008 <span class="comment">% The following tools must be installed and present on the PATH or</span>
0009 <span class="comment">% reside inside the folder returned by</span>
0010 <span class="comment">% MatlabDocMaker.getConfigDirectory.</span>
0011 <span class="comment">% - \c mtocpp, \c mtocpp_post (the main tool)</span>
0012 <span class="comment">% - \c doxygen (mtoc++ is a filter for doxygen)</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% Strongly recommended:</span>
0015 <span class="comment">% - \c latex Doxygen supports built-in latex formulas and</span>
0016 <span class="comment">% MatlabDocMaker/mtoc++ allows for easy extra latex inclusions and</span>
0017 <span class="comment">% notation in code</span>
0018 <span class="comment">% - \c dot Doxygen creates really nice inheritance graphs and</span>
0019 <span class="comment">% collaboration diagrams with dot.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% @author Daniel Wirtz @date 2011-10-13</span>
0022 <span class="comment">%</span>
0023 <span class="comment">% @change{1,5,dw,2013-12-03} Fixed default value selection for properties,</span>
0024 <span class="comment">% now not having set a description or logo does not cause an error to be</span>
0025 <span class="comment">% thrown.</span>
0026 <span class="comment">%</span>
0027 <span class="comment">% @change{1,5,dw,2013-02-21} Fixed the callback for suggested direct documentation creation</span>
0028 <span class="comment">% after MatlabDocMaker.setup (Thanks to Aurelien Queffurust)</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% @change{1,5,dw,2013-02-12} Also added the escaping for the Logo file. Thanks to Chris Olien</span>
0031 <span class="comment">% for the hint.</span>
0032 <span class="comment">%</span>
0033 <span class="comment">% @change{1,5,dw,2013-01-07} Included some backslash escaping for paths on windows platforms.</span>
0034 <span class="comment">% Thanks to MathWorks Pilot Engineer '''Arvind Jayaraman''' for providing the feedback and code!</span>
0035 <span class="comment">%</span>
0036 <span class="comment">% @change{1,4,dw,2012-10-18} Removed \c m4 dependency and included constant properties for</span>
0037 <span class="comment">% configuration file names.</span>
0038 <span class="comment">%</span>
0039 <span class="comment">% @new{1,4,dw,2012-10-16}</span>
0040 <span class="comment">% - Added two more configuration variables &quot;ProjectDescription&quot; and &quot;ProjectLogo&quot; for easier</span>
0041 <span class="comment">% configuration of the MatlabDocMaker in many cases. Thanks to Wolfgang</span>
0042 <span class="comment">% Mennerich &lt;http://www.mathworks.com/matlabcentral/fileexchange/authors/272859&gt; for the suggestion.</span>
0043 <span class="comment">% - Restructured the configuration, now only the project name function has to be implemented</span>
0044 <span class="comment">% (the preferences tag depends on it, there might be more than one project within the same</span>
0045 <span class="comment">% Matlab installation whos documentation is created using this tool). The rest can be provided</span>
0046 <span class="comment">% either at setup time or later via suitable setters for the version, description and logo.</span>
0047 <span class="comment">% - Automatically setting HaveDot in the doxygen config whenever its found on the environment</span>
0048 <span class="comment">% path.</span>
0049 <span class="comment">% - Added basic support for LaTeX documentation creation. Using the parameter 'latex'=true for</span>
0050 <span class="comment">% the create method creates the LaTeX version of the documentation in a folder &quot;latex&quot; in the</span>
0051 <span class="comment">% OutputDirectory (default behaviour)</span>
0052 <span class="comment">%</span>
0053 <span class="comment">% @change{1,4,dw,2012-09-27} Added automatic dot Graphviz tool detection on</span>
0054 <span class="comment">% call to create.</span>
0055 <span class="comment">%</span>
0056 <span class="comment">% @change{1,3,dw,2012-02-16}</span>
0057 <span class="comment">% - Now also collecting error messages from mtocpp_post and adding them to</span>
0058 <span class="comment">% the warnings.log file.</span>
0059 <span class="comment">% - Added the directive &quot;LD_LIBRARY_PATH= &quot; for unix systems, as MatLab</span>
0060 <span class="comment">% sets it inside its executing environment. This can lead to errors if</span>
0061 <span class="comment">% doxygen and/or mtoc++ have been built using never GLIBC (libstd) versions</span>
0062 <span class="comment">% than the one shipped with MatLab.</span>
0063 <span class="comment">%</span>
0064 <span class="comment">% @change{1,3,dw,2012-01-16}</span>
0065 <span class="comment">% - Properly using the correct file separators everywhere now</span>
0066 <span class="comment">% - Hyperlinked the log file so it can be opened directly</span>
0067 <span class="comment">%</span>
0068 <span class="comment">% @change{1,3,dw,2012-01-14} Not displaying the &quot;generated warnings&quot;-text if there have not</span>
0069 <span class="comment">% been any during documentation creation.</span>
0070 <span class="comment">%</span>
0071 <span class="comment">% @change{1,2,dw,2011-11-27}</span>
0072 <span class="comment">% - Included documentation creation for the Windows platform and</span>
0073 <span class="comment">% combined the old methods into one (small effective differences)</span>
0074 <span class="comment">% - No longer storing the doxygen binary file in the prefs as a lot of</span>
0075 <span class="comment">% tools must be present on the path anyways. The new paradigm is to</span>
0076 <span class="comment">% expect all required 3rd-party programmes to be available on PATH. As</span>
0077 <span class="comment">% backup the configuration files directory is</span>
0078 <span class="comment">% added to the Matlab PATH environment \b nonpermanently and any</span>
0079 <span class="comment">% executables found there will thus also be usable.</span>
0080 <span class="comment">% - Included checks for \c dot and \c latex at the setup stage to</span>
0081 <span class="comment">% recommend installation of those tools if not present (the default</span>
0082 <span class="comment">% doxygen settings in Doxyfile.m4 are to use both)</span>
0083 <span class="comment">%</span>
0084 <span class="comment">% @change{1,2,dw,2011-11-08} Improved the createUnix method by displaying the warnings and writing the output to</span>
0085 <span class="comment">% a log file afterwards. Not using cprintf anymore as this is 3rd party software.</span>
0086 <span class="comment">%</span>
0087 <span class="comment">% @change{1,2,dw,2011-11-07} Fixed a recursion bug caused by copy and paste. Now the preferences</span>
0088 <span class="comment">% are stored on an per-application basis.</span>
0089 <span class="comment">%</span>
0090 <span class="comment">% @change{1,2,dw,2011-11-04} Changed the name to MatlabDocMaker in</span>
0091 <span class="comment">% order to export it into the mtoc++ distribution later.</span>
0092 <span class="comment">%</span>
0093 <span class="comment">% @new{1,2,dw,2011-10-13} Added this class and moved documentation related</span>
0094 <span class="comment">% stuff here from the KerMor class.</span>
0095 <span class="comment">%</span>
0096 <span class="comment">% This class is part of the mtoc++ tool</span>
0097 <span class="comment">% - \c Homepage http://www.morepas.org/software/mtocpp/</span>
0098 <span class="comment">% - \c License http://www.morepas.org/software/mtocpp/docs/licensing.html</span>
0099 <span class="comment">%</span>
0100 <span class="comment">% Copyright (c) 2012, Daniel Wirtz</span>
0101 <span class="comment">% All rights reserved.</span>
0102 <span class="comment">%</span>
0103 <span class="comment">% Redistribution and use in source and binary forms, with or without</span>
0104 <span class="comment">% modification, are permitted only in compliance with the BSD license, see</span>
0105 <span class="comment">% http://www.opensource.org/licenses/bsd-license.php</span>
0106 
0107     properties(Constant)
0108         <span class="comment">% File name for the doxygen configuration file processed by the MatlabDocMaker.</span>
0109         <span class="comment">%</span>
0110         <span class="comment">% Assumed to reside in the MatlabDocMaker.getConfigDirectory</span>
0111         <span class="comment">%</span>
0112         <span class="comment">% @type char @default 'Doxyfile.template'</span>
0113         DOXYFILE_TEMPLATE = <span class="string">'Doxyfile.template'</span>;
0114         
0115         <span class="comment">% File name for the latex extras style file processed by the MatlabDocMaker.</span>
0116         <span class="comment">%</span>
0117         <span class="comment">% Assumed to reside in the MatlabDocMaker.getConfigDirectory.</span>
0118         <span class="comment">% If not found, no latex extras are used.</span>
0119         <span class="comment">%</span>
0120         <span class="comment">% @type char @default 'latexextras.template'</span>
0121         LATEXEXTRAS_TEMPLATE = <span class="string">'latexextras.template'</span>;
0122         
0123         <span class="comment">% File name the mtoc++ configuration file.</span>
0124         <span class="comment">%</span>
0125         <span class="comment">% Assumed to reside in the MatlabDocMaker.getConfigDirectory.</span>
0126         <span class="comment">% If not found, no special configuration is used.</span>
0127         <span class="comment">%</span>
0128         <span class="comment">% @type char @default 'mtocpp.conf'</span>
0129         MTOCPP_CONFIGFILE = <span class="string">'mtocpp.conf'</span>;
0130     <span class="keyword">end</span>
0131 
0132     methods(Static)
0133         <a name="_sub0" href="#_subfunctions" class="code">function name = getProjectName</a>
0134             <span class="comment">% Returns the project name.</span>
0135             <span class="comment">%</span>
0136             <span class="comment">% @note Changing the return value of this method will require</span>
0137             <span class="comment">% another execution of MatlabDocMaker.setup as the preferences</span>
0138             <span class="comment">% storage key also depends on it.</span>
0139             <span class="comment">%</span>
0140             <span class="comment">% Return values:</span>
0141             <span class="comment">% name: The project name @type char</span>
0142             
0143 <span class="comment">%             error('Please replace this by returning your project name as string.');</span>
0144             <span class="comment">% Example:</span>
0145             name = <span class="string">'EnergyPlus Co-simulation Toolbox'</span>;
0146         <span class="keyword">end</span>
0147     <span class="keyword">end</span>
0148     
0149     <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0150     <span class="comment">%% End of user defined part.</span>
0151     <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0152     
0153     methods(Static, Sealed)
0154         <a name="_sub1" href="#_subfunctions" class="code">function dir = getOutputDirectory</a>
0155             <span class="comment">% Returns the directory where the applications source files</span>
0156             <span class="comment">% reside</span>
0157             <span class="comment">%</span>
0158             <span class="comment">% Return values:</span>
0159             <span class="comment">% dir: The output directory @type char</span>
0160             dir = MatlabDocMaker.getPref(<span class="string">'outdir'</span>);
0161         <span class="keyword">end</span>
0162         
0163         <a name="_sub2" href="#_subfunctions" class="code">function dir = getSourceDirectory</a>
0164             <span class="comment">% Returns the directory where the applications source files</span>
0165             <span class="comment">% reside</span>
0166             <span class="comment">%</span>
0167             <span class="comment">% Return values:</span>
0168             <span class="comment">% dir: The project source directory @type char</span>
0169             dir = MatlabDocMaker.getPref(<span class="string">'srcdir'</span>);
0170         <span class="keyword">end</span>
0171         
0172         <a name="_sub3" href="#_subfunctions" class="code">function dir = getConfigDirectory</a>
0173             <span class="comment">% Returns the directory where the applications documentation</span>
0174             <span class="comment">% configuration files reside</span>
0175             <span class="comment">%</span>
0176             <span class="comment">% This folder must contain at least the files &quot;mtoc.conf&quot; and</span>
0177             <span class="comment">% &quot;Doxyfile.template&quot;</span>
0178             <span class="comment">%</span>
0179             <span class="comment">% Return values:</span>
0180             <span class="comment">% dir: The documentation configuration directory @type char</span>
0181             dir = MatlabDocMaker.getPref(<span class="string">'confdir'</span>);
0182         <span class="keyword">end</span>
0183         
0184         <a name="_sub4" href="#_subfunctions" class="code">function desc = getProjectDescription</a>
0185             <span class="comment">% Returns the short project description.</span>
0186             <span class="comment">%</span>
0187             <span class="comment">% Return values:</span>
0188             <span class="comment">% desc: The short project description @type char @default []</span>
0189             <span class="comment">%</span>
0190             <span class="comment">% See also: setProjectDescription</span>
0191             desc =  MatlabDocMaker.getPref(<span class="string">'proj_desc'</span>, <span class="string">''</span>);
0192         <span class="keyword">end</span>
0193         
0194         <a name="_sub5" href="#_subfunctions" class="code">function setProjectDescription(value)</a>
0195             <span class="comment">% Sets the project description.</span>
0196             <span class="comment">%</span>
0197             <span class="comment">% Parameters:</span>
0198             <span class="comment">% value: The description @type char</span>
0199             <span class="comment">%</span>
0200             <span class="comment">% See also: getProjectDescription</span>
0201             <span class="keyword">if</span> ~ischar(value)
0202                 error(<span class="string">'The description must be a char array.'</span>);
0203             <span class="keyword">end</span>
0204             MatlabDocMaker.setPref(<span class="string">'proj_desc'</span>, value);
0205         <span class="keyword">end</span>
0206         
0207         <a name="_sub6" href="#_subfunctions" class="code">function version = getProjectVersion</a>
0208             <span class="comment">% Returns the current version of the project.</span>
0209             <span class="comment">%</span>
0210             <span class="comment">% @note The built-in @@new and @@change tags from the</span>
0211             <span class="comment">% Doxyfile.template support two-level versioning a la X.X.</span>
0212             <span class="comment">%</span>
0213             <span class="comment">% Return values:</span>
0214             <span class="comment">% version: The project version @type char @default []</span>
0215             <span class="comment">%</span>
0216             <span class="comment">% See also: setProjectVersion</span>
0217             version = MatlabDocMaker.getPref(<span class="string">'proj_ver'</span>, <span class="string">'0'</span>);
0218         <span class="keyword">end</span>
0219         
0220         <a name="_sub7" href="#_subfunctions" class="code">function setProjectVersion(value)</a>
0221             <span class="comment">% Sets the project version.</span>
0222             <span class="comment">%</span>
0223             <span class="comment">% Parameters:</span>
0224             <span class="comment">% value: The version string @type char</span>
0225             <span class="comment">%</span>
0226             <span class="comment">% See also: getProjectVersion</span>
0227             <span class="keyword">if</span> ~ischar(value)
0228                 error(<span class="string">'The project version must be a char array.'</span>);
0229             <span class="keyword">end</span>
0230             MatlabDocMaker.setPref(<span class="string">'proj_ver'</span>, value);
0231         <span class="keyword">end</span>
0232         
0233         <a name="_sub8" href="#_subfunctions" class="code">function fullPath = getProjectLogo</a>
0234             <span class="comment">% Returns the logo image file for the project. Either an absolute path or a plain</span>
0235             <span class="comment">% filename. For the latter case the image file is assumed to reside inside the</span>
0236             <span class="comment">% directory returned by MatlabDocMaker.getConfigDirectory.</span>
0237             <span class="comment">%</span>
0238             <span class="comment">% Return values:</span>
0239             <span class="comment">% logoFile: The projects logo image file. @type char @default []</span>
0240             <span class="comment">%</span>
0241             <span class="comment">% See also: setProjectLogo</span>
0242             logoFile = MatlabDocMaker.getPref(<span class="string">'proj_logo'</span>,<span class="string">''</span>);
0243             fullPath = <span class="string">''</span>;
0244             <span class="keyword">if</span> ~isempty(logoFile)
0245                 <span class="keyword">if</span> isempty(fileparts(logoFile))
0246                     fullPath = fullfile(MatlabDocMaker.getConfigDirectory,logoFile);
0247                 <span class="keyword">else</span>
0248                     fullPath = logoFile;
0249                 <span class="keyword">end</span>
0250                 <span class="keyword">if</span> exist(fullPath,<span class="string">'file'</span>) ~= 2
0251                     warning(<span class="string">'MatlabDocMaker:getLogo'</span>,[<span class="string">'Could not find logo file &quot;%s&quot;.\n'</span><span class="keyword">...</span>
0252                         <span class="string">'No logo will be shown in documentation output.'</span>],logoFile);
0253                 <span class="keyword">end</span>
0254             <span class="keyword">end</span>
0255         <span class="keyword">end</span>
0256         
0257         <a name="_sub9" href="#_subfunctions" class="code">function setProjectLogo(value)</a>
0258             <span class="comment">% Sets the project logo. Set to '' to unset.</span>
0259             <span class="comment">%</span>
0260             <span class="comment">% See the doxygen documentation for valid logo file types (wont be checked here).</span>
0261             <span class="comment">%</span>
0262             <span class="comment">% Parameters:</span>
0263             <span class="comment">% value: The logo file to use. Must be either an absolute path or a plain filename,</span>
0264             <span class="comment">% in which case the image is assumed to reside inside the</span>
0265             <span class="comment">% MatlabDocMaker.getConfigDirectory directory. @type char</span>
0266             <span class="comment">%</span>
0267             <span class="comment">% See also: getProjectLogo</span>
0268             <span class="keyword">if</span> nargin &lt; 1
0269                 [f, p] = uigetfile(<span class="string">'*.*'</span>, <span class="string">'Select project logo'</span>, pwd);
0270                 <span class="keyword">if</span> f ~= 0
0271                     value = fullfile(p,f);
0272                 <span class="keyword">else</span>
0273                     fprintf(2,<span class="string">'No file selected. Aborting.\n'</span>);
0274                     <span class="keyword">return</span>;
0275                 <span class="keyword">end</span>
0276             <span class="keyword">end</span>
0277             <span class="keyword">if</span> ~ischar(value)
0278                 error(<span class="string">'The project logo file must be a char array.'</span>);
0279             <span class="keyword">end</span>
0280             <span class="keyword">if</span> ~isempty(value)
0281                 fullPath = value;
0282                 <span class="keyword">if</span> isempty(fileparts(value))
0283                     fullPath = fullfile(MatlabDocMaker.getConfigDirectory,value);
0284                 <span class="keyword">end</span>
0285                 <span class="keyword">if</span> ~exist(fullPath,<span class="string">'file'</span>)
0286                     error(<span class="string">'Invalid logo file: Could not find &quot;%s&quot;'</span>,fullPath);
0287                 <span class="keyword">end</span>
0288             <span class="keyword">end</span>
0289             MatlabDocMaker.setPref(<span class="string">'proj_logo'</span>, value);
0290         <span class="keyword">end</span>
0291     <span class="keyword">end</span>
0292         
0293     methods(Static)
0294         
0295         <a name="_sub10" href="#_subfunctions" class="code">function open</a>
0296             <span class="comment">% Opens the generated documentation.</span>
0297             <span class="comment">%</span>
0298             <span class="comment">% Depending on the system's type the generated index.html is opened in the system's</span>
0299             <span class="comment">% default browser.</span>
0300             index = fullfile(MatlabDocMaker.getOutputDirectory, <span class="string">'index.html'</span>);
0301             <span class="keyword">if</span> ispc
0302                 winopen(index);
0303             <span class="keyword">else</span>
0304                 [s, m] = system(sprintf(<span class="string">'xdg-open &quot;%s&quot;'</span>,index));
0305                 <span class="keyword">if</span> s ~= 0
0306                     fprintf(2,<span class="string">'Could not find/execute xdg-open: %s'</span>,m);
0307                     web(index);
0308                 <span class="keyword">end</span>
0309             <span class="keyword">end</span>
0310         <span class="keyword">end</span>
0311         
0312         <a name="_sub11" href="#_subfunctions" class="code">function create(varargin)</a>
0313             <span class="comment">% Creates the Doxygen documentation</span>
0314             <span class="comment">%</span>
0315             <span class="comment">% Parameters:</span>
0316             <span class="comment">% varargin: Optional parameters for creation.</span>
0317             <span class="comment">% open: Set to true if the documentation should be opened after</span>
0318             <span class="comment">% successful compilation @type logical @default false</span>
0319             <span class="comment">% latex: Set to true if `\text{\LaTeX}` output should be generated, too. @type logical</span>
0320             <span class="comment">% @default false</span>
0321            
0322             <span class="comment">%% Preparations</span>
0323             ip = inputParser;
0324             ip.addParamValue(<span class="string">'open'</span>,false,@islogical);
0325             ip.addParamValue(<span class="string">'latex'</span>,false,@islogical);
0326             ip.parse(varargin{:});
0327             genlatex = ip.Results.latex;
0328             
0329             <span class="comment">% Check for correct setup</span>
0330             cdir = MatlabDocMaker.getConfigDirectory;
0331             srcdir = MatlabDocMaker.getSourceDirectory;
0332             outdir = MatlabDocMaker.getOutputDirectory;
0333             <span class="comment">% Check if doxygen config file template exists</span>
0334             doxyfile_in = fullfile(cdir,MatlabDocMaker.DOXYFILE_TEMPLATE);
0335             <span class="keyword">if</span> exist(doxyfile_in,<span class="string">'file'</span>) ~= 2
0336                 error(<span class="string">'No doxygen configuration file template found at &quot;%s&quot;'</span>,doxyfile_in);
0337             <span class="keyword">end</span>
0338             
0339             lstr = <span class="string">''</span>;
0340             <span class="keyword">if</span> genlatex
0341                 lstr = <span class="string">'(+Latex)'</span>;
0342             <span class="keyword">end</span>
0343             fprintf([<span class="string">'Starting creation of doxygen/mtoc++ powered HTML%s documentation for &quot;%s&quot; (%s)\n'</span><span class="keyword">...</span>
0344                 <span class="string">'Sources: %s\nOutput to: &lt;a href=&quot;matlab:MatlabDocMaker.open&quot;&gt;%s&lt;/a&gt;\nCreating config files...'</span>],lstr,<span class="keyword">...</span>
0345                 MatlabDocMaker.getProjectName,MatlabDocMaker.getProjectVersion,<span class="keyword">...</span>
0346                 srcdir,outdir);
0347             
0348             <span class="comment">% Operation-system dependent strings</span>
0349             strs = struct;
0350             <span class="keyword">if</span> isunix
0351                 strs.null = <span class="string">'/dev/null'</span>;
0352                 strs.silencer = <span class="string">''</span>;
0353             <span class="keyword">elseif</span> ispc
0354                 strs.null = <span class="string">'NUL'</span>;
0355                 strs.silencer = <span class="string">'@'</span>; <span class="comment">% argh that took a while to remember..</span>
0356             <span class="keyword">else</span>
0357                 error(<span class="string">'Current platform not supported.'</span>);
0358             <span class="keyword">end</span>
0359             
0360             <span class="comment">% Save current working dir and change into the KerMor home</span>
0361             <span class="comment">% directory; only from there all classes and packages are</span>
0362             <span class="comment">% detected properly.</span>
0363             curdir = pwd;
0364             cd(srcdir);
0365             
0366             <span class="comment">% Append the configuration file directory to the current PATH</span>
0367             pathadd = [pathsep cdir];
0368             setenv(<span class="string">'PATH'</span>,[getenv(<span class="string">'PATH'</span>) pathadd]);
0369             
0370             mtoc_conf = fullfile(cdir,MatlabDocMaker.MTOCPP_CONFIGFILE);
0371             filter = sprintf(<span class="string">'%smtocpp'</span>,strs.silencer);
0372             <span class="keyword">if</span> exist(mtoc_conf,<span class="string">'file'</span>)
0373                 <span class="keyword">if</span> isunix
0374                     strs.filter = <span class="string">'mtocpp_filter.sh'</span>;
0375                     strs.farg = <span class="string">'$1'</span>;
0376                 <span class="keyword">elseif</span> ispc
0377                     strs.filter = <span class="string">'mtocpp_filter.bat'</span>;
0378                     strs.farg = <span class="string">'%1'</span>;
0379                 <span class="keyword">else</span>
0380                     error(<span class="string">'Current platform not supported.'</span>);
0381                 <span class="keyword">end</span>
0382                 <span class="comment">%% Creation part</span>
0383                 cdir = MatlabDocMaker.getConfigDirectory;
0384                 <span class="comment">% Create &quot;configured&quot; filter script for inclusion in doxygen</span>
0385                 filter = fullfile(cdir,strs.filter);
0386                 f = fopen(filter,<span class="string">'w'</span>);
0387                 fprintf(f,<span class="string">'%smtocpp %s %s'</span>,strs.silencer,strs.farg,mtoc_conf);
0388                 fclose(f);
0389                 <span class="keyword">if</span> isunix
0390                     unix([<span class="string">'chmod +x '</span> filter]);
0391                 <span class="keyword">end</span>
0392             <span class="keyword">end</span>
0393             
0394             <span class="comment">%% Prepare placeholders in the Doxyfile template</span>
0395             m = {<span class="string">'_OutputDir_'</span> strrep(outdir,<span class="string">'\'</span>,<span class="string">'\\'</span>); <span class="keyword">...</span>
0396                  <span class="string">'_SourceDir_'</span> strrep(MatlabDocMaker.getSourceDirectory,<span class="string">'\'</span>,<span class="string">'\\'</span>);<span class="keyword">...</span>
0397                  <span class="string">'_ConfDir_'</span> strrep(cdir,<span class="string">'\'</span>,<span class="string">'\\'</span>);<span class="keyword">...</span>
0398                  <span class="string">'_ProjectName_'</span> MatlabDocMaker.getProjectName; <span class="keyword">...</span>
0399                  <span class="string">'_ProjectDescription_'</span> MatlabDocMaker.getProjectDescription; <span class="keyword">...</span>
0400                  <span class="string">'_ProjectLogo_'</span> strrep(MatlabDocMaker.getProjectLogo,<span class="string">'\'</span>,<span class="string">'\\'</span>); <span class="keyword">...</span>
0401                  <span class="string">'_ProjectVersion_'</span> MatlabDocMaker.getProjectVersion; <span class="keyword">...</span>
0402                  <span class="string">'_MTOCFILTER_'</span> strrep(filter,<span class="string">'\'</span>,<span class="string">'\\'</span>); <span class="keyword">...</span>
0403                  };
0404              
0405             <span class="comment">% Check for latex extra stuff</span>
0406             texin = fullfile(cdir,MatlabDocMaker.LATEXEXTRAS_TEMPLATE);
0407             latexextras = <span class="string">''</span>;
0408             <span class="keyword">if</span> exist(texin,<span class="string">'file'</span>) == 2  
0409                 latexstr = strrep(fileread(texin),<span class="string">'_ConfDir_'</span>,strrep(cdir,<span class="string">'\'</span>,<span class="string">'/'</span>));
0410                 latexextras = fullfile(cdir,<span class="string">'latexextras.sty'</span>);
0411                 fid = fopen(latexextras,<span class="string">'w+'</span>); fprintf(fid,<span class="string">'%s'</span>,latexstr); fclose(fid);
0412             <span class="keyword">end</span>
0413             <span class="comment">% Always use &quot;/&quot; for latex usepackage commands, so replace &quot;\&quot; (effectively windows</span>
0414             <span class="comment">% only) by &quot;/&quot;, and dont pass the extension &quot;.sty&quot; as latex automatically adds it.</span>
0415             m(end+1,:) = {<span class="string">'_LatexExtras_'</span> strrep(latexextras(1:end-4),<span class="string">'\'</span>,<span class="string">'/'</span>)};
0416             L = <span class="string">'NO'</span>;
0417             <span class="keyword">if</span> genlatex
0418                 L = <span class="string">'YES'</span>;
0419             <span class="keyword">end</span>
0420             m(end+1,:) = {<span class="string">'_GenLatex_'</span>,L};
0421             
0422             <span class="comment">% Check how to set the HAVE_DOT flag</span>
0423             [s, ~] = system(<span class="string">'dot -V'</span>);
0424             <span class="keyword">if</span> s == 0
0425                 HD = <span class="string">'YES'</span>;
0426             <span class="keyword">else</span>
0427                 HD = <span class="string">'NO'</span>;
0428                 fprintf(<span class="string">'no &quot;dot&quot; found...'</span>);
0429             <span class="keyword">end</span>
0430             m(end+1,:) = {<span class="string">'_HaveDot_'</span>,HD};
0431             
0432             <span class="comment">% Read, replace &amp; write doxygen config file</span>
0433             doxyfile = fullfile(cdir,<span class="string">'Doxyfile'</span>);
0434             doxyconfstr = regexprep(fileread(doxyfile_in),m(:,1),m(:,2));
0435             fid = fopen(doxyfile,<span class="string">'w'</span>); fprintf(fid,<span class="string">'%s'</span>,doxyconfstr); fclose(fid);
0436             
0437             <span class="comment">% Fix for unix systems where the MatLab installation uses older</span>
0438             <span class="comment">% GLIBSTD libraries than doxygen/mtoc++</span>
0439             ldpath = <span class="string">''</span>;
0440             <span class="keyword">if</span> isunix
0441                 ldpath = <span class="string">'LD_LIBRARY_PATH= '</span>;
0442             <span class="keyword">end</span>
0443             <span class="comment">% Call doxygen</span>
0444             fprintf(<span class="string">'running doxygen with mtoc++ filter...'</span>);
0445             [~,warn] = system(sprintf(<span class="string">'%sdoxygen &quot;%s&quot; 1&gt;%s'</span>,ldpath, doxyfile, strs.null));
0446              
0447             <span class="comment">% Postprocess</span>
0448             fprintf(<span class="string">'running mtoc++ postprocessor...'</span>);
0449             [~,postwarn] = system(sprintf(<span class="string">'%smtocpp_post &quot;%s&quot; 1&gt;%s'</span>,ldpath,<span class="keyword">...</span>
0450                 outdir, strs.null));
0451             <span class="keyword">if</span> ~isempty(postwarn)
0452                 warn = [warn sprintf(<span class="string">'mtoc++ postprocessor messages:\n'</span>) postwarn];
0453             <span class="keyword">end</span>
0454             
0455             <span class="comment">% Create latex document if desired</span>
0456             <span class="keyword">if</span> genlatex
0457                 oldd = pwd;
0458                 latexerr = false;
0459                 latexdir = fullfile(outdir,<span class="string">'latex'</span>);
0460                 <span class="keyword">if</span> exist(latexdir,<span class="string">'dir'</span>) == 7
0461                     <span class="keyword">if</span> exist(fullfile(latexdir,<span class="string">'refman.tex'</span>),<span class="string">'file'</span>) == 2
0462                         fprintf(<span class="string">'compiling LaTeX output...'</span>);
0463                         cd(latexdir);
0464                         [s, latexmsg] = system(<span class="string">'make'</span>);
0465                         <span class="keyword">if</span> s ~= 0
0466                             warn = [warn sprintf(<span class="string">'LaTeX compiler output:\n'</span>) latexmsg];
0467                             latexerr = true;
0468                         <span class="keyword">end</span>
0469                     <span class="keyword">else</span>
0470                         fprintf(<span class="string">'cannot compile LaTeX output: no refman.tex found...'</span>);
0471                     <span class="keyword">end</span>
0472                 <span class="keyword">end</span>
0473                 cd(oldd);
0474             <span class="keyword">end</span>
0475             
0476             <span class="comment">% Tidy up</span>
0477             fprintf(<span class="string">'cleaning up...'</span>);
0478             <span class="keyword">if</span> isfield(strs,<span class="string">'filter'</span>)
0479                 delete(filter);
0480             <span class="keyword">end</span>
0481             <span class="keyword">if</span> ~isempty(latexextras)
0482                 delete(latexextras);
0483             <span class="keyword">end</span>
0484             delete(doxyfile);
0485             
0486             <span class="comment">%% Post generation phase</span>
0487             cd(curdir);
0488             <span class="comment">% Restore PATH to previous value</span>
0489             curpath = getenv(<span class="string">'PATH'</span>);
0490             setenv(<span class="string">'PATH'</span>,curpath(1:end-length(pathadd)));
0491             fprintf(<span class="string">'done!\n'</span>);
0492             
0493             <span class="comment">% Process warnings</span>
0494             showchars = 800;
0495             warn = strtrim(warn);
0496             <span class="keyword">if</span> ~isempty(warn)
0497                 dispwarn = [warn(1:min(showchars,length(warn))) <span class="string">' [...]'</span>];
0498                 fprintf(<span class="string">'First %d characters of warnings generated during documentation creation:\n%s\n'</span>,showchars,dispwarn);
0499                 <span class="comment">% Write to log file</span>
0500                 log = fullfile(outdir,<span class="string">'warnings.log'</span>);
0501                 f = fopen(log,<span class="string">'w'</span>); fprintf(f,<span class="string">'%s'</span>,warn); fclose(f);
0502                 fprintf(2,<span class="string">'MatlabDocMaker finished with warnings!\n'</span>);
0503                 fprintf(<span class="string">'Complete log file at &lt;a href=&quot;matlab:edit(''%s'')&quot;&gt;%s&lt;/a&gt;.\n'</span>,log,log);
0504                 <span class="comment">% Check for latex log file</span>
0505                 log = fullfile(outdir,<span class="string">'_formulas.log'</span>);
0506                 <span class="keyword">if</span> exist(log,<span class="string">'file'</span>)
0507                     fprintf(<span class="string">'Found LaTeX formula log file. Check &lt;a href=&quot;matlab:edit(''%s'')&quot;&gt;%s&lt;/a&gt; for any errors.\n'</span>,log,log);
0508                 <span class="keyword">end</span>
0509                 <span class="comment">% Check for errors on latex generation</span>
0510                 <span class="keyword">if</span> genlatex &amp;&amp; latexerr
0511                     log = fullfile(latexdir,<span class="string">'refman.log'</span>);
0512                     fprintf(<span class="string">'There have been errors with LaTeX compilation. See log file at &lt;a href=&quot;matlab:edit(''%s'')&quot;&gt;%s&lt;/a&gt;.\n'</span>,log,log);
0513                 <span class="keyword">end</span>
0514             <span class="keyword">else</span>
0515                 fprintf(<span class="string">'MatlabDocMaker finished with no warnings!\n'</span>);
0516             <span class="keyword">end</span>
0517             
0518             <span class="comment">% Open index.html if wanted</span>
0519             <span class="keyword">if</span> ip.Results.open
0520                 MatlabDocMaker.open;
0521             <span class="keyword">end</span>
0522         <span class="keyword">end</span>
0523         
0524         <a name="_sub12" href="#_subfunctions" class="code">function setup</a>
0525             <span class="comment">% Runs the setup script for MatlabDocMaker and collects all</span>
0526             <span class="comment">% necessary paths in order for the documentation creation to</span>
0527             <span class="comment">% work properly.</span>
0528             
0529             <span class="comment">%% Validity checks</span>
0530             fprintf(<span class="string">'&lt;&lt;&lt;&lt; Welcome to the MatlabDocMaker setup for your project &quot;%s&quot;! &gt;&gt;&gt;&gt;\n'</span>,MatlabDocMaker.getProjectName);
0531             
0532             <span class="comment">%% Setup directories</span>
0533             <span class="comment">% Source directory</span>
0534             srcdir = MatlabDocMaker.getPref(<span class="string">'srcdir'</span>,<span class="string">''</span>);
0535             word = <span class="string">'keep'</span>;
0536             <span class="keyword">if</span> isempty(srcdir) || exist(srcdir,<span class="string">'dir'</span>) ~= 7
0537                 srcdir = pwd;
0538                 word = <span class="string">'set'</span>;
0539             <span class="keyword">end</span>
0540             str = sprintf(<span class="string">'Do you want to %s %s as your projects source directory?\n(Y)es/(N)o?: '</span>,word,strrep(srcdir,<span class="string">'\'</span>,<span class="string">'\\'</span>));
0541             ds = lower(input(str,<span class="string">'s'</span>));
0542             <span class="keyword">if</span> isequal(ds,<span class="string">'n'</span>)
0543                 d = uigetdir(srcdir,<span class="string">'Please select the projects source directory'</span>);
0544                 <span class="keyword">if</span> d == 0
0545                     error(<span class="string">'No source directory specified. Aborting setup.'</span>);
0546                 <span class="keyword">end</span>
0547                 srcdir = d;
0548             <span class="keyword">end</span>
0549             MatlabDocMaker.setPref(<span class="string">'srcdir'</span>,srcdir);
0550             
0551             <span class="comment">% Config directory</span>
0552             confdir = MatlabDocMaker.getPref(<span class="string">'confdir'</span>,<span class="string">''</span>);
0553             word = <span class="string">'keep'</span>;
0554             <span class="keyword">if</span> isempty(confdir) || exist(confdir,<span class="string">'dir'</span>) ~= 7
0555                 confdir = fullfile(srcdir,<span class="string">'documentation'</span>);
0556                 word = <span class="string">'set'</span>;
0557             <span class="keyword">end</span>
0558             str = sprintf(<span class="string">'Do you want to %s %s as your documentation configuration files directory?\n(Y)es/(N)o?: '</span>,word,strrep(confdir,<span class="string">'\'</span>,<span class="string">'\\'</span>));
0559             ds = lower(input(str,<span class="string">'s'</span>));
0560             <span class="keyword">if</span> isequal(ds,<span class="string">'n'</span>)
0561                 d = uigetdir(confdir,<span class="string">'Please select the documentation configuration directory'</span>);
0562                 <span class="keyword">if</span> d == 0
0563                     error(<span class="string">'No documentation configuration directory specified. Aborting setup.'</span>);
0564                 <span class="keyword">end</span>
0565                 confdir = d;
0566             <span class="keyword">end</span>
0567             MatlabDocMaker.setPref(<span class="string">'confdir'</span>,confdir);
0568             
0569             <span class="comment">% Output directory</span>
0570             outdir = MatlabDocMaker.getPref(<span class="string">'outdir'</span>,<span class="string">''</span>);
0571             word = <span class="string">'keep'</span>;
0572             <span class="keyword">if</span> isempty(outdir) || exist(outdir,<span class="string">'dir'</span>) ~= 7
0573                 outdir = confdir;
0574                 word = <span class="string">'set'</span>;
0575             <span class="keyword">end</span>
0576             str = sprintf(<span class="string">'Do you want to %s %s as your documentation output directory?\n(Y)es/(N)o?: '</span>,word,strrep(outdir,<span class="string">'\'</span>,<span class="string">'\\'</span>));
0577             ds = lower(input(str,<span class="string">'s'</span>));
0578             <span class="keyword">if</span> isequal(ds,<span class="string">'n'</span>)
0579                 d = uigetdir(outdir,<span class="string">'Please select the documentation output directory'</span>);
0580                 <span class="keyword">if</span> d == 0
0581                     error(<span class="string">'No documentation output directory specified. Aborting setup.'</span>);
0582                 <span class="keyword">end</span>
0583                 outdir = d;
0584             <span class="keyword">end</span>
0585             MatlabDocMaker.setPref(<span class="string">'outdir'</span>,outdir);
0586             
0587             <span class="comment">%% Additional Project properties</span>
0588             <span class="keyword">if</span> isequal(lower(input([<span class="string">'Do you want to specify further project details?\n'</span><span class="keyword">...</span>
0589                     <span class="string">'You can set them later using provided set methods. (Y)es/(N)o?: '</span>],<span class="string">'s'</span>)),<span class="string">'y'</span>)
0590                 MatlabDocMaker.setPref(<span class="string">'proj_ver'</span>,input(<span class="string">'Please specify the project version, e.g. &quot;0.1&quot;: '</span>,<span class="string">'s'</span>));
0591                 MatlabDocMaker.setPref(<span class="string">'proj_desc'</span>,input(<span class="string">'Please specify a short project description: '</span>,<span class="string">'s'</span>));
0592                 MatlabDocMaker.setProjectLogo;
0593             <span class="keyword">end</span>
0594             
0595             <span class="comment">%% Check for necessary and recommended tools</span>
0596             hasall = true;
0597             setenv(<span class="string">'PATH'</span>,[getenv(<span class="string">'PATH'</span>) pathsep confdir]);
0598             fprintf(<span class="string">'[Required] Checking for doxygen... '</span>);
0599             [st, vers] = system(<span class="string">'doxygen --version'</span>);
0600             <span class="keyword">if</span> st == 0
0601                 fprintf(<span class="string">' found %s\n'</span>,vers(1:end-1));
0602             <span class="keyword">else</span>
0603                 fprintf(2,<span class="string">' not found!\n'</span>);
0604                 hasall = false;                
0605             <span class="keyword">end</span>
0606             fprintf(<span class="string">'[Required] Checking for mtoc++... '</span>);
0607             ldpath = <span class="string">''</span>;
0608             <span class="keyword">if</span> isunix
0609                 ldpath = <span class="string">'LD_LIBRARY_PATH= '</span>;
0610             <span class="keyword">end</span>
0611             [st, vers] = system(sprintf(<span class="string">'%smtocpp --version'</span>,ldpath));
0612             <span class="keyword">if</span> st == 0
0613                 fprintf(<span class="string">' found %s\n'</span>,vers(1:end-1));
0614             <span class="keyword">else</span>
0615                 fprintf(2,<span class="string">' not found!\n'</span>);
0616                 hasall = false;
0617             <span class="keyword">end</span>
0618             fprintf(<span class="string">'[Recommended] Checking for dot... '</span>);
0619             [st, vers] = system(<span class="string">'dot -V'</span>);
0620             <span class="keyword">if</span> st == 0
0621                 fprintf(<span class="string">' found %s\n'</span>,vers(1:end-1));
0622             <span class="keyword">else</span>
0623                 fprintf(2,<span class="string">'dot Graphviz tool not found!\nInstall dot for nicer class diagrams.\n'</span>);
0624             <span class="keyword">end</span>
0625             fprintf(<span class="string">'[Recommended] Checking for latex... '</span>);
0626             [st, vers] = system(<span class="string">'latex --version'</span>);
0627             <span class="keyword">if</span> st == 0
0628                 fprintf(<span class="string">' found %s\n'</span>,vers(1:strfind(vers,sprintf(<span class="string">'\n'</span>))-1));
0629             <span class="keyword">else</span>
0630                 fprintf(2,<span class="string">'latex not found!\nA LaTeX installation available on the system path is strongly recommended with mtoc++.\n'</span>);
0631             <span class="keyword">end</span>
0632             <span class="comment">% Ghostscript</span>
0633             fprintf(<span class="string">'[Recommended] Checking for ghostscript... '</span>);
0634             <span class="keyword">if</span> ispc
0635                 [st, vers] = system(<span class="string">'gswin32c --version'</span>);
0636                 <span class="keyword">if</span> st ~= 0
0637                     [st, vers] = system(<span class="string">'gswin64c --version'</span>);
0638                 <span class="keyword">end</span>
0639             <span class="keyword">else</span>
0640                 [st, vers] = system(<span class="string">'gs --version'</span>);
0641             <span class="keyword">end</span>
0642             <span class="keyword">if</span> st == 0
0643                 fprintf(<span class="string">' found %s\n'</span>,vers(1:strfind(vers,sprintf(<span class="string">'\n'</span>))-1));
0644             <span class="keyword">else</span>
0645                 fprintf(2,<span class="string">'ghostscript not found!\nCreating LaTeX formulas might not work properly.\n'</span>);
0646             <span class="keyword">end</span>
0647 
0648             <span class="keyword">if</span> ~hasall
0649                 fprintf(2,<span class="string">'Please make sure all prerequisites can be found on PATH or copy the executables into %s.\n'</span>,confdir);
0650                 fprintf(<span class="string">'&lt;&lt;&lt;&lt; MatlabDocMaker setup finished with warnings. &gt;&gt;&gt;&gt;\n'</span>);
0651             <span class="keyword">else</span>
0652                 fprintf(<span class="string">'&lt;&lt;&lt;&lt; MatlabDocMaker setup successful. &gt;&gt;&gt;&gt;\nYou can now create your projects documentation by running &lt;a href=&quot;matlab:MatlabDocMaker.create(''open'',true)&quot;&gt;MatlabDocMaker.create&lt;/a&gt;!\n'</span>);
0653             <span class="keyword">end</span>
0654         <span class="keyword">end</span>
0655     <span class="keyword">end</span>
0656     
0657     methods(Static, Access=private)
0658         <a name="_sub13" href="#_subfunctions" class="code">function value = getProjPrefTag</a>
0659             <span class="comment">% Gets the tag for the MatLab preferences struct.</span>
0660             <span class="comment">%</span>
0661             <span class="comment">% @change{0,7,dw,2013-04-02} Now also removing &quot;~&quot; and &quot;-&quot; characters from ProjectName tags for preferences.</span>
0662             str = regexprep(strrep(strtrim(MatlabDocMaker.getProjectName),<span class="string">' '</span>,<span class="string">'_'</span>),<span class="string">'[^\d\w]'</span>,<span class="string">''</span>);
0663             value = sprintf(<span class="string">'MatlabDocMaker_on_%s'</span>,str);
0664         <span class="keyword">end</span>
0665         
0666         <a name="_sub14" href="#_subfunctions" class="code">function value = getPref(name, default)</a>
0667             <span class="keyword">if</span> nargin &lt; 2
0668                 def = [];
0669             <span class="keyword">else</span> 
0670                 def = default;
0671             <span class="keyword">end</span>
0672             value = getpref(MatlabDocMaker.getProjPrefTag,name,def);
0673             <span class="keyword">if</span> nargin &lt; 2 &amp;&amp; isempty(value)
0674                 error(<span class="string">'MatlabDocMaker preferences not found/set correctly. (Re-)Run the MatlabDocMaker.setup method.'</span>);
0675             <span class="keyword">end</span>
0676         <span class="keyword">end</span>
0677         
0678         <a name="_sub15" href="#_subfunctions" class="code">function value = setPref(name, value)</a>
0679             setpref(MatlabDocMaker.getProjPrefTag,name,value);
0680         <span class="keyword">end</span>
0681     <span class="keyword">end</span>
0682 <span class="keyword">end</span></pre></div>
<hr><address>EnergyPlus Co-simulation Toolbox &copy; 2018</address>
</body>
</html>